<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Campaign Manager :: Gloomhaven Enhanced</title>
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Gloomhaven Enhanced</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Community</div>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://discord.gg/SA9hHVNkMf">Discord</a>
            <a class="navbar-item" href="https://discord.gg/2kM4T6p">Custom Content Discord</a>
            <a class="navbar-item" href="https://www.reddit.com/r/GloomhavenTTSEnhanced/">Reddit</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://steamcommunity.com/sharedfiles/filedetails/?id=2402018642">Steam</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="dev" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Development</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../build.html">Working on GHE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../documentation.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../commandLine.html">Command Line</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Engine</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="campaignManager.html">Campaign Manager</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Frosthaven</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../frosthaven/campaignManager.html">Campaign Manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../frosthaven/sourceOfTruth.html">Sources of Truth</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Gloomhaven</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gloomhaven/campaignManager.html">Campaign Manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gloomhaven/sourceOfTruth.html">Sources of Truth</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Development</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../custom/index.html">Custom Content</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../custom/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Development</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mod/2/index.html">Gloomhaven Enhanced</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mod/2/index.html">2</a>
        </li>
        <li class="version">
          <a href="../../mod/1.3/index.html">1.3</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Development</a></li>
    <li>Engine</li>
    <li><a href="campaignManager.html">Campaign Manager</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/gloomhaven-tts-enhanced/public-scripts/edit/main/docs/content/development/modules/engine/pages/campaignManager.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Campaign Manager</h1>
<div class="sect1">
<h2 id="_testing"><a class="anchor" href="#_testing"></a>Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There&#8217;s a test suite that runs automatic tests for the campaign manager.
Given an input file with campaign data, it loads the campaign and then saves it afterward.
It then compares the created save file with an expected output.
If both match, the test is OK, otherwise it will show which parts of didn&#8217;t match.</p>
</div>
<div class="paragraph">
<p>The test suite can be found in the <code>test\campaign-manager</code> directory of the repository.</p>
</div>
<div class="sect2">
<h3 id="_executing_the_tests"><a class="anchor" href="#_executing_the_tests"></a>Executing the tests</h3>
<div class="ulist">
<ul>
<li>
<p>Load the latest enginehaven mod.</p>
</li>
<li>
<p>Additively load the game box to test into the mod.</p>
</li>
<li>
<p>Save the game and load it again.</p>
</li>
<li>
<p>Execute the command <code>pnpm test:&lt;game&gt;</code> (e.g. <code>pnpm test:frosthaven</code>) from the test directory.</p>
</li>
<li>
<p>This will run all the test cases for this game as defined by the respective <code>test.ts</code> file.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adding_new_tests"><a class="anchor" href="#_adding_new_tests"></a>Adding new tests</h3>
<div class="ulist">
<ul>
<li>
<p>Create a new directory in the <code>res/test</code> directory for the specific game with the name of the test (e.g. <code>res/test/frosthaven/basic</code>).</p>
</li>
<li>
<p>Create a file <code>input.json</code> and a file <code>expected.json</code> inside this new directory.</p>
</li>
<li>
<p>Add the campaign data that should be loaded into <code>input.json</code> and the expected output after saving into <code>expected.json</code>.</p>
</li>
<li>
<p>Add a new test into the <code>src/test/&lt;game&gt;.test.ts</code> file like this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ts hljs" data-lang="ts">test("basic campaign", async () =&gt; {
  await testHandler.runTest("basic");
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The name of the test must match the name of the directory created in the first step.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
  <p>This page use the Germania One font which is licended under the <a href=https://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=OFL>OFL license</a></p>
  <p>This page is not associate with Cephalofair Games. All rights to the Gloomhaven game or anything related to it are reserved to its creators Isaac Childres & Cephalofair Games.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
